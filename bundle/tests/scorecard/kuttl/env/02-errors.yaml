apiVersion: apps/v1
kind: Deployment
metadata:
  name: env-liberty
spec:
  template:
    spec:
      containers:
        - env:
            - name: TEST_VALUE
              value: test-value
            - name: TEST_NAME
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.name
            - name: TEST_CPU_REQUEST
              valueFrom:
                resourceFieldRef:
                  containerName: app
                  resource: requests.cpu
          envFrom:
            - configMapRef:
                name: env-liberty-configmap
            - secretRef:
                name: env-liberty-secret